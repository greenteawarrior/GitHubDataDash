[{"original_position": 17, "diff_hunk": "@@ -55,9 +55,12 @@ class Convolutional(Initializable):\n     conv2d_impl = staticmethod(conv2d)\n \n     # Used to override the output shape computation for a given value of\n-    # conv2d_impl. Should accept 4 positional arguments: the image size,\n-    # the filter size, the step (strides), and the border mode.\n-    get_output_shape = staticmethod(ConvOp.getOutputShape)\n+    # conv2d_impl. Should accept 4 positional arguments: the shape of an\n+    # image minibatch (with 4 elements: batch size, number of channels,\n+    # height, and width), the shape of the filter bank (number of filters,\n+    # number of output channels, filter height, filter width), the border\n+    # mode, and the step (vertical and horizontal strides).", "url": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46002442", "created_at": "2015-11-26T18:58:51Z", "body": "What should it return? ", "updated_at": "2015-11-26T18:58:51Z", "html_url": "https://github.com/mila-udem/blocks/pull/925#discussion_r46002442", "pull_request_url": "https://api.github.com/repos/mila-udem/blocks/pulls/925", "_links": {"self": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46002442"}, "html": {"href": "https://github.com/mila-udem/blocks/pull/925#discussion_r46002442"}, "pull_request": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/925"}}, "commit_id": "65e995202260e2a93c617772d454a460101cc08a", "user": {"following_url": "https://api.github.com/users/dmitriy-serdyuk/following{/other_user}", "events_url": "https://api.github.com/users/dmitriy-serdyuk/events{/privacy}", "organizations_url": "https://api.github.com/users/dmitriy-serdyuk/orgs", "url": "https://api.github.com/users/dmitriy-serdyuk", "gists_url": "https://api.github.com/users/dmitriy-serdyuk/gists{/gist_id}", "html_url": "https://github.com/dmitriy-serdyuk", "subscriptions_url": "https://api.github.com/users/dmitriy-serdyuk/subscriptions", "avatar_url": "https://avatars.githubusercontent.com/u/2872615?v=3", "repos_url": "https://api.github.com/users/dmitriy-serdyuk/repos", "received_events_url": "https://api.github.com/users/dmitriy-serdyuk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/dmitriy-serdyuk/starred{/owner}{/repo}", "site_admin": false, "login": "dmitriy-serdyuk", "type": "User", "id": 2872615, "followers_url": "https://api.github.com/users/dmitriy-serdyuk/followers"}, "path": "blocks/bricks/conv.py", "position": 17, "original_commit_id": "65e995202260e2a93c617772d454a460101cc08a", "id": 46002442}, {"original_position": 33, "diff_hunk": "@@ -157,9 +160,11 @@ def get_dim(self, name):\n         if name == 'input_':\n             return (self.num_channels,) + self.image_size\n         if name == 'output':\n-            return ((self.num_filters,) +\n-                    self.get_output_shape(self.image_size, self.filter_size,\n-                                          self.step, self.border_mode))\n+            image_shape = (None, self.num_channels) + self.image_size\n+            kernel_shape = ((self.num_filters, self.num_channels) +\n+                            self.filter_size)\n+            return self.get_output_shape(image_shape, kernel_shape,\n+                                         self.border_mode, self.step)[-3:]", "url": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46002712", "created_at": "2015-11-26T19:06:54Z", "body": "Why do you need this `-3`? It can conceal errors, I would just let it crash.", "updated_at": "2015-11-26T19:06:54Z", "html_url": "https://github.com/mila-udem/blocks/pull/925#discussion_r46002712", "pull_request_url": "https://api.github.com/repos/mila-udem/blocks/pulls/925", "_links": {"self": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46002712"}, "html": {"href": "https://github.com/mila-udem/blocks/pull/925#discussion_r46002712"}, "pull_request": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/925"}}, "commit_id": "65e995202260e2a93c617772d454a460101cc08a", "user": {"following_url": "https://api.github.com/users/dmitriy-serdyuk/following{/other_user}", "events_url": "https://api.github.com/users/dmitriy-serdyuk/events{/privacy}", "organizations_url": "https://api.github.com/users/dmitriy-serdyuk/orgs", "url": "https://api.github.com/users/dmitriy-serdyuk", "gists_url": "https://api.github.com/users/dmitriy-serdyuk/gists{/gist_id}", "html_url": "https://github.com/dmitriy-serdyuk", "subscriptions_url": "https://api.github.com/users/dmitriy-serdyuk/subscriptions", "avatar_url": "https://avatars.githubusercontent.com/u/2872615?v=3", "repos_url": "https://api.github.com/users/dmitriy-serdyuk/repos", "received_events_url": "https://api.github.com/users/dmitriy-serdyuk/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/dmitriy-serdyuk/starred{/owner}{/repo}", "site_admin": false, "login": "dmitriy-serdyuk", "type": "User", "id": 2872615, "followers_url": "https://api.github.com/users/dmitriy-serdyuk/followers"}, "path": "blocks/bricks/conv.py", "position": 33, "original_commit_id": "65e995202260e2a93c617772d454a460101cc08a", "id": 46002712}, {"original_position": 33, "diff_hunk": "@@ -157,9 +160,11 @@ def get_dim(self, name):\n         if name == 'input_':\n             return (self.num_channels,) + self.image_size\n         if name == 'output':\n-            return ((self.num_filters,) +\n-                    self.get_output_shape(self.image_size, self.filter_size,\n-                                          self.step, self.border_mode))\n+            image_shape = (None, self.num_channels) + self.image_size\n+            kernel_shape = ((self.num_filters, self.num_channels) +\n+                            self.filter_size)\n+            return self.get_output_shape(image_shape, kernel_shape,\n+                                         self.border_mode, self.step)[-3:]", "url": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46009908", "created_at": "2015-11-26T23:11:25Z", "body": "Because the new thing returns a 4-tuple, which can be None. Our interfaces revolve around 3-tuples.", "updated_at": "2015-11-26T23:11:25Z", "html_url": "https://github.com/mila-udem/blocks/pull/925#discussion_r46009908", "pull_request_url": "https://api.github.com/repos/mila-udem/blocks/pulls/925", "_links": {"self": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46009908"}, "html": {"href": "https://github.com/mila-udem/blocks/pull/925#discussion_r46009908"}, "pull_request": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/925"}}, "commit_id": "65e995202260e2a93c617772d454a460101cc08a", "user": {"following_url": "https://api.github.com/users/dwf/following{/other_user}", "events_url": "https://api.github.com/users/dwf/events{/privacy}", "organizations_url": "https://api.github.com/users/dwf/orgs", "url": "https://api.github.com/users/dwf", "gists_url": "https://api.github.com/users/dwf/gists{/gist_id}", "html_url": "https://github.com/dwf", "subscriptions_url": "https://api.github.com/users/dwf/subscriptions", "avatar_url": "https://avatars.githubusercontent.com/u/60206?v=3", "repos_url": "https://api.github.com/users/dwf/repos", "received_events_url": "https://api.github.com/users/dwf/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/dwf/starred{/owner}{/repo}", "site_admin": false, "login": "dwf", "type": "User", "id": 60206, "followers_url": "https://api.github.com/users/dwf/followers"}, "path": "blocks/bricks/conv.py", "position": 33, "original_commit_id": "65e995202260e2a93c617772d454a460101cc08a", "id": 46009908}, {"original_position": 17, "diff_hunk": "@@ -55,9 +55,12 @@ class Convolutional(Initializable):\n     conv2d_impl = staticmethod(conv2d)\n \n     # Used to override the output shape computation for a given value of\n-    # conv2d_impl. Should accept 4 positional arguments: the image size,\n-    # the filter size, the step (strides), and the border mode.\n-    get_output_shape = staticmethod(ConvOp.getOutputShape)\n+    # conv2d_impl. Should accept 4 positional arguments: the shape of an\n+    # image minibatch (with 4 elements: batch size, number of channels,\n+    # height, and width), the shape of the filter bank (number of filters,\n+    # number of output channels, filter height, filter width), the border\n+    # mode, and the step (vertical and horizontal strides).", "url": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46012563", "created_at": "2015-11-27T01:32:46Z", "body": "Good point, it should return a 4-tuple.", "updated_at": "2015-11-27T01:32:46Z", "html_url": "https://github.com/mila-udem/blocks/pull/925#discussion_r46012563", "pull_request_url": "https://api.github.com/repos/mila-udem/blocks/pulls/925", "_links": {"self": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/comments/46012563"}, "html": {"href": "https://github.com/mila-udem/blocks/pull/925#discussion_r46012563"}, "pull_request": {"href": "https://api.github.com/repos/mila-udem/blocks/pulls/925"}}, "commit_id": "65e995202260e2a93c617772d454a460101cc08a", "user": {"following_url": "https://api.github.com/users/dwf/following{/other_user}", "events_url": "https://api.github.com/users/dwf/events{/privacy}", "organizations_url": "https://api.github.com/users/dwf/orgs", "url": "https://api.github.com/users/dwf", "gists_url": "https://api.github.com/users/dwf/gists{/gist_id}", "html_url": "https://github.com/dwf", "subscriptions_url": "https://api.github.com/users/dwf/subscriptions", "avatar_url": "https://avatars.githubusercontent.com/u/60206?v=3", "repos_url": "https://api.github.com/users/dwf/repos", "received_events_url": "https://api.github.com/users/dwf/received_events", "gravatar_id": "", "starred_url": "https://api.github.com/users/dwf/starred{/owner}{/repo}", "site_admin": false, "login": "dwf", "type": "User", "id": 60206, "followers_url": "https://api.github.com/users/dwf/followers"}, "path": "blocks/bricks/conv.py", "position": 17, "original_commit_id": "65e995202260e2a93c617772d454a460101cc08a", "id": 46012563}]